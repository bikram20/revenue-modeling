<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revenue Modeling Simulation</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        .panel {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .full-width {
            grid-column: 1 / -1;
        }
        h2 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .ndr-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 15px;
        }
        .ndr-column {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .ndr-row {
            display: grid;
            grid-template-columns: 80px 1fr;
            gap: 10px;
            align-items: center;
        }
        input[type="number"] {
            padding: 6px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
        }
        button:hover {
            background: #2980b9;
        }
        .results {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 4px;
            margin-top: 15px;
        }
        .result-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #bdc3c7;
        }
        .result-row:last-child {
            border-bottom: none;
            font-weight: bold;
            font-size: 18px;
            color: #2c3e50;
        }
        .method1 {
            border-left: 4px solid #e74c3c;
        }
        .method2 {
            border-left: 4px solid #27ae60;
        }
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
        }
        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
        }
        .critical {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 20px;
            margin-top: 15px;
            border-radius: 4px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
            font-size: 14px;
        }
        th {
            background: #3498db;
            color: white;
        }
        .highlight {
            background: #fff9e6;
        }
        .difference {
            margin-top: 20px;
            padding: 20px;
            background: #ffe6e6;
            border-radius: 8px;
            text-align: center;
        }
        .difference h3 {
            margin-top: 0;
            color: #c0392b;
        }
        .config-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <h1>üìä 2026 Revenue Projection: Annualized Exit Run-Rate vs. Cohort-Based NDR</h1>
    
    <div style="max-width: 1400px; margin: 0 auto 30px auto; background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h2 style="margin-top: 0; color: #2c3e50; border-bottom: none; padding-bottom: 0;">üéØ What This Analysis Does</h2>
        <p style="font-size: 16px; line-height: 1.6; color: #555; margin: 15px 0;">
            This simulation compares two common approaches to projecting 2026 revenue. More importantly, it shows how 
            <strong>miscalculating NDR doesn't just get the total wrong - it misallocates the burden between existing customers and new customer acquisition</strong>, 
            setting your marketing/sales team up for failure.
        </p>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
            <div style="background: #ffe6e6; padding: 15px; border-radius: 4px; border-left: 4px solid #e74c3c;">
                <strong style="color: #c0392b;">‚ùå Common Mistake (Exit Run-Rate Method):</strong>
                <p style="margin: 10px 0 0 0; font-size: 14px; line-height: 1.5;">
                    Overestimates NDR contribution ‚Üí Underestimates new customer needs ‚Üí Marketing gets blindsided mid-year with impossible targets
                </p>
            </div>
            <div style="background: #d4edda; padding: 15px; border-radius: 4px; border-left: 4px solid #27ae60;">
                <strong style="color: #27ae60;">‚úÖ Accurate Approach (Cohort-Based NDR):</strong>
                <p style="margin: 10px 0 0 0; font-size: 14px; line-height: 1.5;">
                    Correctly calculates base cohort expansion ‚Üí Sets realistic new customer targets from day one ‚Üí Aligns teams properly
                </p>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="panel full-width">
            <h2>2025 Configuration</h2>
            <div class="config-row">
                <div>
                    <label><strong>Total 2025 ARR ($M):</strong></label>
                    <input type="number" id="totalARR" value="100" step="1" style="width: 150px; margin-left: 10px;">
                </div>
                <div>
                    <label><strong>Monthly Growth Rate (%):</strong></label>
                    <input type="number" id="growthRate" value="2.5" step="0.1" style="width: 100px; margin-left: 10px;">
                </div>
            </div>
            <button onclick="calculate()">üîÑ Recalculate</button>
        </div>

        <div class="panel full-width">
            <h2>NDR Configuration - 2025 Actual & 2026 Projection</h2>
            <p style="color: #666; margin-bottom: 15px;">
                Set NDR for each month. <strong>2025</strong> shows actual performance. <strong>2026</strong> is your projection for existing customer retention/expansion.
            </p>
            <div class="ndr-grid">
                <div>
                    <h3 style="margin-top: 0; color: #2c3e50; font-size: 16px;">2025 Actual NDR (%)</h3>
                    <div class="ndr-column" id="ndr2025Container"></div>
                </div>
                <div>
                    <h3 style="margin-top: 0; color: #2c3e50; font-size: 16px;">2026 Projected NDR (%)</h3>
                    <div class="ndr-column" id="ndr2026Container"></div>
                </div>
            </div>
            <button onclick="calculate()" style="margin-top: 20px;">üíæ Apply Changes</button>
        </div>

        <div class="panel full-width">
            <h2>2025 Monthly Breakdown</h2>
            <table id="breakdown2025">
                <thead>
                    <tr>
                        <th>Month</th>
                        <th>MRR</th>
                        <th>NDR %</th>
                        <th>Revenue</th>
                    </tr>
                </thead>
                <tbody id="tableBody2025"></tbody>
            </table>
        </div>

        <div class="panel method1">
            <h2>‚ùå Exit Run-Rate Method (Overcommits)</h2>
            <div class="warning">
                <strong>‚ö†Ô∏è This method OVERCOMMITS on NDR</strong><br>
                It applies NDR to already-grown revenue, which means it UNDERESTIMATES new customer needs.
            </div>
            <div id="method1Results" class="results"></div>
        </div>

        <div class="panel method2">
            <h2>‚úÖ Cohort-Based NDR Method (Accurate)</h2>
            <div class="success">
                <strong>‚úì This is the ACCURATE method</strong><br>
                It correctly calculates base cohort expansion and realistically projects new customer requirements.
            </div>
            <div id="method2Results" class="results"></div>
        </div>

        <div class="panel full-width difference">
            <h3>üí∞ Revenue Difference & New Customer Burden</h3>
            <div id="difference"></div>
        </div>

        <div class="panel full-width critical">
            <h2 style="color: #c0392b; margin-top: 0; border-bottom: 2px solid #dc3545;">üéØ The Critical Trade-Off: NDR vs. New Customer Acquisition</h2>
            <div id="tradeoffAnalysis"></div>
            
            <div style="background: white; padding: 20px; margin-top: 20px; border-radius: 4px;">
                <h3 style="margin-top: 0; color: #2c3e50;">Why This Matters for Your Business</h3>
                <p style="line-height: 1.6; margin: 10px 0;">
                    <strong>If NDR goes down, new customer revenue MUST go up to hit your targets.</strong> The Exit Run-Rate Method 
                    hides this truth by overestimating NDR contribution. When reality hits mid-year, your marketing and sales teams 
                    suddenly face impossible new customer targets they weren't prepared for.
                </p>
                <div style="background: #f8f9fa; padding: 15px; margin: 15px 0; border-left: 4px solid #3498db; border-radius: 4px;">
                    <strong>The Right Approach:</strong>
                    <ul style="margin: 10px 0; padding-left: 20px; line-height: 1.8;">
                        <li><strong>Calculate NDR correctly</strong> using the cohort-based method</li>
                        <li><strong>Set realistic M1-M12 new customer targets</strong> from the start of the year</li>
                        <li><strong>Focus your teams</strong> on the right metrics: preserve/grow NDR AND drive new acquisition</li>
                        <li><strong>Align expectations</strong> between customer success (NDR) and marketing/sales (new customers)</li>
                    </ul>
                </div>
                <div style="background: #fff3cd; padding: 15px; border-radius: 4px; border-left: 4px solid #ffc107;">
                    <strong>üí° Key Insight:</strong> The M1-M12 cohort (customers acquired in the last 12 months) grows throughout 2026. 
                    By October 2026, you're relying on customers acquired from Oct 2025 through Sep 2026. If you underestimate this need 
                    using wrong NDR math, you're setting impossible targets for your acquisition teams.
                </div>
            </div>
        </div>
    </div>

    <script>
        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        let ndrValues2025 = Array(12).fill(110);
        let ndrValues2026 = Array(12).fill(110);

        // Initialize NDR inputs (no sliders, just text boxes)
        function initializeNDRInputs() {
            const container2025 = document.getElementById('ndr2025Container');
            const container2026 = document.getElementById('ndr2026Container');
            
            container2025.innerHTML = '';
            container2026.innerHTML = '';
            
            months.forEach((month, i) => {
                // 2025 inputs
                const div2025 = document.createElement('div');
                div2025.className = 'ndr-row';
                div2025.innerHTML = `
                    <label>${month}:</label>
                    <input type="number" id="ndr2025_${i}" value="${ndrValues2025[i]}" 
                           onchange="updateNDR2025(${i}, this.value)" 
                           style="width: 100%;" min="80" max="150" step="1">
                `;
                container2025.appendChild(div2025);
                
                // 2026 inputs
                const div2026 = document.createElement('div');
                div2026.className = 'ndr-row';
                div2026.innerHTML = `
                    <label>${month}:</label>
                    <input type="number" id="ndr2026_${i}" value="${ndrValues2026[i]}" 
                           onchange="updateNDR2026(${i}, this.value)" 
                           style="width: 100%;" min="80" max="150" step="1">
                `;
                container2026.appendChild(div2026);
            });
        }

        function updateNDR2025(index, value) {
            ndrValues2025[index] = parseFloat(value);
            calculate();
        }

        function updateNDR2026(index, value) {
            ndrValues2026[index] = parseFloat(value);
            calculate();
        }

        function calculate() {
            const targetRevenue = parseFloat(document.getElementById('totalARR').value);
            const growthRate = parseFloat(document.getElementById('growthRate').value) / 100;

            // Calculate starting MRR to reach target total
            let geometricSum = ((Math.pow(1 + growthRate, 12) - 1) / growthRate);
            let startingMRR = targetRevenue / geometricSum;

            // Calculate each month
            let mrrValues = [];
            let revenueValues = [];
            let totalRevenue = 0;

            for (let i = 0; i < 12; i++) {
                let mrr = startingMRR * Math.pow(1 + growthRate, i);
                mrrValues.push(mrr);
                revenueValues.push(mrr);
                totalRevenue += mrr;
            }

            // Display 2025 breakdown
            displayBreakdown(mrrValues, revenueValues, totalRevenue);

            // Calculate Exit Run-Rate Method: Exit Revenue √ó 12 √ó Average NDR (2026)
            let exitMRR = mrrValues[11]; // December MRR
            let avgNDR2026 = ndrValues2026.reduce((a, b) => a + b, 0) / 12 / 100;
            let method1Revenue = exitMRR * 12 * avgNDR2026;

            // Calculate Cohort-Based Method: Base Cohort √ó NDR (2026) + New Growth
            let baseMRR = mrrValues[0]; // January MRR (starting cohort)
            let method2ExistingCustomers = 0;
            
            // Apply 2026 NDR month by month to the base cohort
            for (let i = 0; i < 12; i++) {
                method2ExistingCustomers += baseMRR * (ndrValues2026[i] / 100);
            }
            
            // Calculate new customer needs
            // Method 1's implicit assumption about new customers
            let method1NewCustomerNeed = method1Revenue - method2ExistingCustomers;
            
            // Method 2's realistic new customer need
            let newCustomerGrowth2026 = (exitMRR - baseMRR) * 12; // Growth trajectory from 2025
            let method2Revenue = method2ExistingCustomers + newCustomerGrowth2026 * 0.5;
            let method2NewCustomerNeed = method2Revenue - method2ExistingCustomers;

            // Display results
            displayMethod1(exitMRR, avgNDR2026, method1Revenue, method2ExistingCustomers, method1NewCustomerNeed);
            displayMethod2(baseMRR, method2ExistingCustomers, method2Revenue, method2NewCustomerNeed);
            displayDifference(method1Revenue, method2Revenue, method1NewCustomerNeed, method2NewCustomerNeed);
            displayTradeoffAnalysis(method2ExistingCustomers, method2NewCustomerNeed, method2Revenue, avgNDR2026);
        }

        function displayBreakdown(mrr, revenue, total) {
            const tbody = document.getElementById('tableBody2025');
            tbody.innerHTML = '';
            
            months.forEach((month, i) => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${month} 2025</td>
                    <td>$${mrr[i].toFixed(2)}M</td>
                    <td>${ndrValues2025[i]}%</td>
                    <td>$${revenue[i].toFixed(2)}M</td>
                `;
            });
            
            const totalRow = tbody.insertRow();
            totalRow.className = 'highlight';
            totalRow.innerHTML = `
                <td><strong>Total 2025</strong></td>
                <td><strong>$${mrr[11].toFixed(2)}M exit</strong></td>
                <td><strong>${(ndrValues2025.reduce((a,b) => a+b) / 12).toFixed(1)}% avg</strong></td>
                <td><strong>$${total.toFixed(2)}M</strong></td>
            `;
        }

        function displayMethod1(exitMRR, avgNDR, revenue, existingRevenue, newCustomerNeed) {
            const div = document.getElementById('method1Results');
            div.innerHTML = `
                <div class="result-row">
                    <span>Dec 2025 Exit MRR:</span>
                    <span>$${exitMRR.toFixed(2)}M</span>
                </div>
                <div class="result-row">
                    <span>Annualized (√ó 12):</span>
                    <span>$${(exitMRR * 12).toFixed(2)}M</span>
                </div>
                <div class="result-row">
                    <span>Average 2026 NDR:</span>
                    <span>${(avgNDR * 100).toFixed(1)}%</span>
                </div>
                <div class="result-row">
                    <span>2026 Revenue Projection:</span>
                    <span>$${revenue.toFixed(2)}M</span>
                </div>
                <div class="result-row" style="background: #ffe6e6; margin-top: 10px; padding: 10px; border-radius: 4px;">
                    <span><strong>Existing Customers (Base Cohort):</strong></span>
                    <span><strong>$${existingRevenue.toFixed(2)}M</strong></span>
                </div>
                <div class="result-row" style="background: #fff3cd; padding: 10px; border-radius: 4px;">
                    <span><strong>New Customers Needed (M1-M12):</strong></span>
                    <span><strong>$${newCustomerNeed.toFixed(2)}M</strong></span>
                </div>
            `;
        }

        function displayMethod2(baseMRR, existingRevenue, totalRevenue, newCustomerNeed) {
            const div = document.getElementById('method2Results');
            div.innerHTML = `
                <div class="result-row">
                    <span>Jan 2025 Base Cohort:</span>
                    <span>$${baseMRR.toFixed(2)}M</span>
                </div>
                <div class="result-row">
                    <span>2026 Revenue Projection:</span>
                    <span>$${totalRevenue.toFixed(2)}M</span>
                </div>
                <div class="result-row" style="background: #d4edda; margin-top: 10px; padding: 10px; border-radius: 4px;">
                    <span><strong>Existing Customers (Base Cohort):</strong></span>
                    <span><strong>$${existingRevenue.toFixed(2)}M</strong></span>
                </div>
                <div class="result-row" style="background: #cfe2ff; padding: 10px; border-radius: 4px;">
                    <span><strong>New Customers Needed (M1-M12):</strong></span>
                    <span><strong>$${newCustomerNeed.toFixed(2)}M</strong></span>
                </div>
            `;
        }

        function displayDifference(method1, method2, method1NewCust, method2NewCust) {
            const diff = method1 - method2;
            const pct = (diff / method2 * 100).toFixed(1);
            const newCustDiff = method1NewCust - method2NewCust;
            const newCustPct = ((method1NewCust / method2NewCust - 1) * 100).toFixed(1);
            
            const div = document.getElementById('difference');
            div.innerHTML = `
                <div style="font-size: 24px; margin-bottom: 10px;">
                    <strong>Exit Run-Rate Method overcommits by $${diff.toFixed(2)}M</strong>
                </div>
                <div style="font-size: 18px; color: #c0392b;">
                    That's ${pct}% higher than the accurate projection!
                </div>
                <div style="margin-top: 15px; font-size: 14px; color: #555;">
                    Exit Run-Rate: $${method1.toFixed(2)}M | Cohort-Based NDR: $${method2.toFixed(2)}M
                </div>
                <div style="margin-top: 25px; padding: 20px; background: white; border-radius: 8px;">
                    <h3 style="margin-top: 0; color: #c0392b;">üö® Impact on New Customer Targets</h3>
                    <p style="font-size: 16px; line-height: 1.6;">
                        The Exit Run-Rate Method <strong>UNDERESTIMATES</strong> new customer needs by 
                        <strong style="color: #c0392b;">$${Math.abs(newCustDiff).toFixed(2)}M (${Math.abs(newCustPct).toFixed(1)}%)</strong>.
                    </p>
                    <p style="font-size: 14px; color: #666; line-height: 1.6;">
                        This means your marketing/sales team will be blindsided mid-year when NDR doesn't deliver 
                        the inflated numbers, and they suddenly need to find <strong>$${Math.abs(newCustDiff).toFixed(2)}M more</strong> 
                        in new customer revenue than planned.
                    </p>
                </div>
            `;
        }

        function displayTradeoffAnalysis(existingRevenue, newRevenue, totalRevenue, avgNDR) {
            const existingPct = (existingRevenue / totalRevenue * 100).toFixed(1);
            const newPct = (newRevenue / totalRevenue * 100).toFixed(1);
            
            const div = document.getElementById('tradeoffAnalysis');
            div.innerHTML = `
                <div style="background: white; padding: 20px; border-radius: 4px; margin-bottom: 20px;">
                    <h3 style="margin-top: 0; color: #2c3e50;">2026 Revenue Composition (Cohort-Based Method)</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                        <div style="background: #d4edda; padding: 15px; border-radius: 4px; text-align: center;">
                            <div style="font-size: 14px; color: #666; margin-bottom: 5px;">Existing Customers (Base Cohort with NDR)</div>
                            <div style="font-size: 32px; font-weight: bold; color: #27ae60;">$${existingRevenue.toFixed(2)}M</div>
                            <div style="font-size: 14px; color: #666; margin-top: 5px;">${existingPct}% of total</div>
                        </div>
                        <div style="background: #cfe2ff; padding: 15px; border-radius: 4px; text-align: center;">
                            <div style="font-size: 14px; color: #666; margin-bottom: 5px;">New Customers (M1-M12 Cohorts)</div>
                            <div style="font-size: 32px; font-weight: bold; color: #0d6efd;">$${newRevenue.toFixed(2)}M</div>
                            <div style="font-size: 14px; color: #666; margin-top: 5px;">${newPct}% of total</div>
                        </div>
                    </div>
                </div>

                <div style="background: white; padding: 20px; border-radius: 4px;">
                    <h3 style="margin-top: 0; color: #2c3e50;">What If NDR Changes?</h3>
                    <table style="width: 100%; margin-top: 10px;">
                        <thead>
                            <tr>
                                <th>Scenario</th>
                                <th>Avg NDR</th>
                                <th>Existing Customer $</th>
                                <th>New Customer $ Needed</th>
                                <th>Impact</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${generateNDRScenarios(existingRevenue, newRevenue, totalRevenue, avgNDR)}
                        </tbody>
                    </table>
                    <p style="margin-top: 15px; font-size: 14px; color: #666; line-height: 1.6;">
                        <strong>This table shows:</strong> As NDR drops, the burden shifts to new customer acquisition. 
                        A 5% drop in NDR might require 20-30% more new customer revenue. This is why getting NDR calculation 
                        right from the start is critical for setting achievable targets.
                    </p>
                </div>
            `;
        }

        function generateNDRScenarios(baseExisting, baseNew, totalRevenue, baseNDR) {
            const scenarios = [
                { label: 'Optimistic', ndr: baseNDR * 100 + 5 },
                { label: 'Current Projection', ndr: baseNDR * 100 },
                { label: 'Conservative', ndr: baseNDR * 100 - 5 },
                { label: 'Pessimistic', ndr: baseNDR * 100 - 10 }
            ];

            return scenarios.map(scenario => {
                const ndrMultiplier = scenario.ndr / (baseNDR * 100);
                const existingRev = baseExisting * ndrMultiplier;
                const newRev = totalRevenue - existingRev;
                const newChange = ((newRev / baseNew - 1) * 100).toFixed(1);
                const changeSign = newChange >= 0 ? '+' : '';
                const bgColor = scenario.label === 'Current Projection' ? 'background: #fff9e6;' : '';
                
                return `
                    <tr style="${bgColor}">
                        <td><strong>${scenario.label}</strong></td>
                        <td>${scenario.ndr.toFixed(1)}%</td>
                        <td>$${existingRev.toFixed(2)}M</td>
                        <td>$${newRev.toFixed(2)}M</td>
                        <td style="color: ${newChange >= 0 ? '#c0392b' : '#27ae60'};">${changeSign}${newChange}%</td>
                    </tr>
                `;
            }).join('');
        }

        // Initialize and calculate
        initializeNDRInputs();
        calculate();
    </script>
</body>
</html>
